@startuml Campground Booking System
title Campground Booking System - Class Diagram (UML Profile)

' --- Stereotypes Definition ---
skinparam class {
    BackgroundColor<<model>> LightBlue
    BackgroundColor<<controller>> LightGreen
    BackgroundColor<<middleware>> LightYellow
}

' --- Classes ---

package "Models" {
    class User <<model>> {
        -String name
        -String tel
        -String email
        -String password
        -String role
        +getSignedJwtToken()
        +matchPassword()
    }

    class Campground <<model>> {
        -String name
        -String address
        -String tel
        -- Virtual --
        +bookings
    }

    class Booking <<model>> {
        -Date bookingDate
        -Number nights
        -ObjectId user
        -ObjectId campground
    }
}

package "Controllers" {
    class AuthController <<controller>> {
        +register()
        +login()
        +getMe()
        +logout()
        +changePassword()
        +deleteUser()
    }

    class CampgroundController <<controller>> {
        +getCampgrounds()
        +getCampground()
        +createCampground()
        +updateCampground()
        +deleteCampground()
    }

    class BookingController <<controller>> {
        +getBookings()
        +getBooking()
        +addBooking()
        +updateBooking()
        +deleteBooking()
    }
}

package "Middleware" {
    class AuthMiddleware <<middleware>> {
        +protect()
        +authorize()
    }
}

' --- Relationships ---

' Controllers use Models
AuthController ..> User : uses
CampgroundController ..> Campground : uses
CampgroundController ..> Booking : deletes
BookingController ..> Booking : uses
BookingController ..> Campground : checks

' Middleware interacts with Models
AuthMiddleware ..> User : validates

' Model Relationships
User "1" -- "0..*" Booking : owns >
Campground "1" -- "0..*" Booking : receives >

@enduml